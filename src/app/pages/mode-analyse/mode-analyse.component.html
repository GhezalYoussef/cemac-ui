<cd-pageTitle keyValue="pageTitle.analyse" styleClass="sncf-default-color" ></cd-pageTitle>
<div class="grid">
    <div class="col-12 lg:col-12">
        <p-panel [showHeader]="false">
            <p-panel header="Liste des resultats">
                <div class="grid" style="margin-bottom: 10px">
                    <div class="col-12 lg:col-4">
                        <div class="p-inputgroup">
                            <span class="p-inputgroup-addon" style="color: #ffffff;background-color: #b081f2">
                                {{requete ?'REF_' + requete.requeteRef : 'REF'}}
                            </span>
                            <span class="p-inputgroup-addon" style="color: #ffffff;background-color: #bb6ba8">
                                REQUÊTE DU : {{ RQDate | date: 'mediumDate'}} A {{RQDate | date:'mediumTime'}}
                            </span>
                        </div>
                    </div>
                </div>
                <div class="grid" style="margin-bottom: 10px">
                    <div class="col-12 lg:col-12">
                        <div class="pastille">
                            <p-table [value]="analyseResultList"
                                     sortMode="multiple"
                                     [paginator]="true"
                                     [rows]="10"
                                     [rowsPerPageOptions]="[5,10,20]"
                                     selectionMode="single"
                                     [(selection)]="selectedResult"
                                     responsiveLayout="scroll"
                                     dataKey="refResult">
                                <ng-template pTemplate="header">
                                    <tr style="font-size: x-small">
                                        <th>Réf</th>
                                        <th>CATÉGORIE</th>
                                        <th>SOUS CATÉGORIE</th>
                                        <th>OPÉRATION</th>
                                        <th>SOUS OPÉRATION</th>
                                        <th>CATÉGORIE MAINTENANCE</th>
                                        <th>UOP</th>
                                        <th>COUT</th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-result let-expanded="expanded">
                                    <tr [pSelectableRow]="result" style="font-size: small;">
                                        <td>{{result.refResult}}</td>
                                        <td>{{result.categorie}}</td>
                                        <td>{{result.sousCategorie}}</td>
                                        <td>{{result.operation}}</td>
                                        <td>{{result.sousOperation}}</td>
                                        <td>{{result.categorieMaintenance}}</td>
                                        <td>{{result.uop}}</td>
                                        <td>{{result.cout}}</td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                    </div>
                </div>
            </p-panel>
        </p-panel>
    </div>
</div>

