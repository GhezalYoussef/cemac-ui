<cd-pageTitle keyValue="pageTitle.analyse" styleClass="sncf-default-color" ></cd-pageTitle>
<div class="grid">
    <div class="col-12 lg:col-12">
        <p-panel [showHeader]="false">
            <p-panel header="Liste des resultats">
                <div class="grid">
                    <div class="col-12 lg:col-4">
                        <div class="p-inputgroup">
                            <span class="p-inputgroup-addon">
                                {{requete ?'REF_' + requete.requeteRef : 'REF'}}
                            </span>
                            <span class="p-inputgroup-addon">
                                REQUÊTE DU : {{ RQDate | date: 'mediumDate'}} A {{RQDate | date:'mediumTime'}}
                            </span>
                        </div>
                    </div>
                </div>
                <div class="grid">
                    <div class="col-12 lg:col-12">
                        <div class="pastille">
                            <p-table [value]="analyseResultList"
                                     sortMode="multiple"
                                     selectionMode="single"
                                     [(selection)]="selectedResult"
                                     responsiveLayout="scroll"
                                     dataKey="refResult">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th>CATÉGORIE</th>
                                        <th>SOUS CATÉGORIE</th>
                                        <th>OPÉRATION</th>
                                        <th>SOUS OPÉRATION</th>
                                        <th>UOP</th>
                                        <th>COUT</th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-result>
                                    <tr [ngClass]="{'row-accessories': result.uop === 0}">
                                        <td>{{result.categorie}}</td>
                                        <td>{{result.sousCategorie}}</td>
                                        <td>{{result.operation}}</td>
                                        <td>{{result.sousOperation}}</td>
                                        <td>
                                            <div [ngClass]="{'outofuop':result.uop === 0, 'inuop': result.uop > 0}">
                                                {{result.uop}}
                                            </div>
                                        </td>
                                        <td>{{result.cout}}</td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                    </div>
                </div>
            </p-panel>
        </p-panel>
    </div>
</div>

