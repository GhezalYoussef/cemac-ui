<cd-pageTitle keyValue="pageTitle.analyse" styleClass="sncf-default-color" ></cd-pageTitle>
<div class="grid">
    <div class="col-12 lg:col-12">
        <p-panel [showHeader]="false" *ngIf="!typeAnalyse">
            <p-panel header="Liste des resultats">
                <div class="grid">
                    <div class="col-12 lg:col-12">
                        <div class="pastille">
                            <p-table [value]="analyseResultList"
                                     sortMode="multiple"
                                     selectionMode="single"
                                     responsiveLayout="scroll"
                                     dataKey="refResult">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th colspan="4">
                                            <span class="p-inputgroup-addon">
                                                ÉTUDE DU : {{ RQDate | date: 'mediumDate'}} A {{RQDate | date:'mediumTime'}}
                                            </span>
                                        </th>
                                        <th colspan="2">
                                            <span class="p-inputgroup-addon">
                                                {{requete_1 ?'REF_' + requete_1.requeteRef : 'REF'}}
                                            </span>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>CATÉGORIE</th>
                                        <th>SOUS CATÉGORIE</th>
                                        <th>OPÉRATION</th>
                                        <th>SOUS OPÉRATION</th>
                                        <th>UOP</th>
                                        <th>COUT</th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-result>
                                    <tr [ngClass]="{'row-accessories': result.uop === 0}">
                                        <td>{{result.categorie}}</td>
                                        <td>{{result.sousCategorie}}</td>
                                        <td>{{result.operation}}</td>
                                        <td>{{result.sousOperation}}</td>
                                        <td>
                                            <div [ngClass]="{'outofuop':result.uop === 0, 'inuop': result.uop > 0}">
                                                {{result.uop | number:'1.2-2'}}
                                            </div>
                                        </td>
                                        <td>{{result.cout}}</td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                    </div>
                </div>
            </p-panel>
        </p-panel>
        <p-panel [showHeader]="false" *ngIf="typeAnalyse">
            <p-panel header="Liste des resultats">
                <div class="grid">
                    <div class="col-12 lg:col-12">
                        <div class="pastille">
                            <p-table [value]="analyseResultCompareList"
                                     sortMode="multiple"
                                     selectionMode="single"
                                     responsiveLayout="scroll"
                                     dataKey="refResult">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th colspan="4">
                                            <span class="p-inputgroup-addon">
                                                ÉTUDE DU : {{ RQDate | date: 'mediumDate'}} A {{RQDate | date:'mediumTime'}}
                                            </span>
                                        </th>
                                        <th colspan="2">
                                            <span class="p-inputgroup-addon">
                                                {{requete_1 ?'REF_' + requete_1.requeteRef : 'REF'}}
                                            </span>
                                        </th>
                                        <th colspan="2">
                                            <span class="p-inputgroup-addon">
                                                {{requete_2 ?'REF_' + requete_2.requeteRef : 'REF'}}
                                            </span>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th>CATÉGORIE</th>
                                        <th>SOUS CATÉGORIE</th>
                                        <th>OPÉRATION</th>
                                        <th>SOUS OPÉRATION</th>
                                        <th>UOP_1</th>
                                        <th>COUT_1</th>
                                        <th>UOP_2</th>
                                        <th>COUT_2</th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-result>
                                    <tr [ngClass]="{'row-accessories': result.uop === 0 && result.uop_2 === 0}">
                                        <td>{{result.categorie}}</td>
                                        <td>{{result.sousCategorie}}</td>
                                        <td>{{result.operation}}</td>
                                        <td>{{result.sousOperation}}</td>
                                        <td>
                                            <div [ngClass]="{'outofuop':result.uop === 0, 'inuop': result.uop > 0}">
                                                {{ result.uop | number:'1.2-2' }}
                                            </div>
                                        </td>
                                        <td>{{result.cout}}</td>
                                        <td>
                                            <div [ngClass]="{'outofuop':result.uop_2 === 0, 'inuop': result.uop_2 > 0}">
                                                {{result.uop_2 | number:'1.2-2'}}
                                            </div>
                                        </td>
                                        <td>{{result.cout_2}}</td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                    </div>
                </div>
            </p-panel>
        </p-panel>
    </div>
</div>

